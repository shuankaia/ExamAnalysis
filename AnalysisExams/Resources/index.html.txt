<!DOCTYPE html><html><head><meta charset="utf-8"name="viewport"content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes"/><title>党史知识竞赛</title><style type="text/css">*{margin:0;padding:0}.question{margin:20px 30px;padding:15px 0;border-bottom:1px solid#A9A9A9}.question_title{font-size:16px;font-weight:bold;padding:15px 0}.tips{font-size:12px;font-weight:normal;margin-left:15px}.answer{font-size:18px;margin:5px 0;display:flex;width:300px;justify-content:space-between}.answer>div:last-child{margin-left:15px}.btn{display:flex;justify-content:center;align-items:center}.btn*{margin:15px 10px;font-size:16px}</style></head><body><div class="btn"><button type="button"onclick="random()">随机全部</button><button type="button"onclick="randomW(10)">随机10题</button><button type="button"onclick="randomW(100)">随机100题</button></div><div class="main"id="main"></div><div class="btn"><button type="button"onclick="submitAll()">提交试卷</button><button type="button"onclick="reloadPage()">重做试卷</button></div></body><script type="text/javascript">"(####Problem####)";let template={"single":function(o,index){let arr=o.answers.map(item=>{return`<div class="answer"><label><input type="radio"name="${index}"right="${item.right}"/>${item.answer}</label></div>`});let str=`<div class="question"type="${o.type}"value="${o.value}"><div class="question_title">${index}、${o.question}<span class="tips">单选题${o.value}分</span></div><div class="answers">${arr.join("")}</div><div class="submit"><button type="button"style="width:100px;height:50px"onclick="submit(${index})">提交</button></div></div>`;return str},"multiple":function(o,index){let arr=o.answers.map(item=>{return`<div class="answer"><label><input type="checkbox"name="${index}"right="${item.right}"/>${item.answer}</label></div>`});let str=`<div class="question"type="${o.type}"value="${o.value}"><div class="question_title">${index}、${o.question}<span class="tips">多选题${o.value}分</span></div><div class="answers">${arr.join("")}</div><div class="submit"><button type="button"style="width:100px;height:50px"onclick="submit(${index})">提交</button></div></div>`;return str},};function isAppend(){return Math.random()>=0.5?true:false}function randomArray(array){var resultArray=[];for(var count=0;count<array.length;count++){if(isAppend()){resultArray[resultArray.length]=array[count]}}return resultArray}function randomArrayW(array,num){var resultArray=[];for(var count=0;count<num;count++){if(isAppend()){resultArray[resultArray.length]=array[count]}}return resultArray}function getRandomArrayElements(arr,count){var shuffled=arr.slice(0),i=arr.length,min=i-count,temp,index;while(i-->min){index=Math.floor((i+1)*Math.random());temp=shuffled[index];shuffled[index]=shuffled[i];shuffled[i]=temp}return shuffled.slice(min)}function init(){let arr=[];for(index in questions){let templateStr=template[questions[index].type](questions[index],index);arr.push(templateStr)}let main=document.getElementById("main");main.innerHTML=arr.join("")}function random(num){let arr=[];let ar=randomArray(questions);for(index in ar){let templateStr=template[ar[index].type](ar[index],index);arr.push(templateStr)}let main=document.getElementById("main");main.innerHTML=arr.join("")}function randomW(num){let arr=[];let ar=getRandomArrayElements(questions,num);for(index in ar){let templateStr=template[ar[index].type](ar[index],index);arr.push(templateStr)}let main=document.getElementById("main");main.innerHTML=arr.join("")}function submit(index){let elementArr=document.getElementsByClassName("question");let point=0;let totalPoint=0;let element=elementArr[index];let value=element.getAttribute("value");totalPoint+=parseInt(value);let answerList=element.querySelectorAll(".answer");let count=0;let type=element.getAttribute("type");for(let index_a=0;index_a<answerList.length;index_a++){let inputItem=answerList[index_a].querySelector("input");if(inputItem.getAttribute("right")=="true"){answerList[index_a].style.backgroundColor="red"}if(type=="single"){if(inputItem.checked&&inputItem.getAttribute("right")=="true"){point+=parseInt(value);answerList[index_a].style.backgroundColor="Green"}}if(type=="multiple"){if((inputItem.checked&&inputItem.getAttribute("right")=="false")||(!inputItem.checked&&inputItem.getAttribute("right")=="true")){count++}}if(type=="judge"){if((inputItem.checked&&inputItem.getAttribute("right")=="true")){point+=parseInt(value);answerList[index_a].style.backgroundColor="Green"}}}if(type=="multiple"){if(count==0){point+=parseInt(value);for(let index_a=0;index_a<answerList.length;index_a++){let inputItem=answerList[index_a].querySelector("input");if(inputItem.getAttribute("right")=="true"){answerList[index_a].style.backgroundColor="Green"}}}}}function submitAll(){let elementArr=document.getElementsByClassName("question");let point=0;let totalPoint=0;for(let index=0;index<elementArr.length;index++){let element=elementArr[index];let value=element.getAttribute("value");totalPoint+=parseInt(value);let answerList=element.querySelectorAll(".answer");let count=0;let type=element.getAttribute("type");for(let index_a=0;index_a<answerList.length;index_a++){let inputItem=answerList[index_a].querySelector("input");if(inputItem.getAttribute("right")=="true"){answerList[index_a].style.backgroundColor="red"}if(type=="single"){if(inputItem.checked&&inputItem.getAttribute("right")=="true"){point+=parseInt(value);answerList[index_a].style.backgroundColor="Green"}}if(type=="multiple"){if((inputItem.checked&&inputItem.getAttribute("right")=="false")||(!inputItem.checked&&inputItem.getAttribute("right")=="true")){count++}}if(type=="judge"){if((inputItem.checked&&inputItem.getAttribute("right")=="true")){point+=parseInt(value);answerList[index_a].style.backgroundColor="Green"}}}if(type=="multiple"){if(count==0){point+=parseInt(value);for(let index_a=0;index_a<answerList.length;index_a++){let inputItem=answerList[index_a].querySelector("input");if(inputItem.getAttribute("right")=="true"){answerList[index_a].style.backgroundColor="Green"}}}}}alert("总分是："+totalPoint+",您的得分是："+point)}function reloadPage(){location.reload()}init();</script></html>